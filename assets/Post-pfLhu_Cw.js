import{n as m,j as d,A as p,d as f,c as g,b as i,g as s,_ as P,w as k,o as y}from"./index-BnImo_pt.js";import{_ as a}from"./Input.vue_vue_type_style_index_0_lang-Cxpa9Fkv.js";const w=()=>{const r=m(),o=d([]);return{posts:o,getAllPosts:async()=>{try{const t=r.getJwt(),n=await p.get("/post",{Authorization:t?`Bearer ${t}`:""});o.value=Array.isArray(n.data)?n.data:[]}catch(t){throw console.error("Error fetching posts",t),t}},createPost:async t=>{const n=new FormData;n.append("title",t.title),n.append("content",t.content),t.fbPostLink&&n.append("fbPostLink",t.fbPostLink),t.igPostLink&&n.append("igPostLink",t.igPostLink),t.media&&n.append("file",t.media);try{const e=r.getJwt();return(await p.post("/post",n,{"Content-Type":"multipart/form-data",Authorization:e?`Bearer ${e}`:""})).data}catch(e){throw console.error("Error creating post",e),e}}}},V={class:"flex flex-col justify-center content-center items-center w-full h-hull gap-20"},h=f({__name:"Post",setup(r){const o=d({title:"",content:"",fbPostLink:"",igPostLink:"",media:null}),{createPost:c}=w(),u=n=>{var l;const e=n.target;(l=e==null?void 0:e.files)!=null&&l.length&&(o.value.media=e.files[0])},t=async()=>{try{await c(o.value),alert("Post created successfully!")}catch{alert("Failed to create post")}};return(n,e)=>(y(),g("div",V,[e[4]||(e[4]=i("h3",{class:"text-3xl"},"Események feltöltése",-1)),i("form",{onSubmit:k(t,["prevent"]),class:"w-[50%] h-[50%] flex flex-col justify-center content-center items-center gap-5"},[s(a,{modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.title=l),placeholder:"cím",type:"text"},null,8,["modelValue"]),s(a,{modelValue:o.value.content,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.content=l),placeholder:"tartalom",type:"text"},null,8,["modelValue"]),s(a,{modelValue:o.value.fbPostLink,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.fbPostLink=l),placeholder:"facebook poszt link",type:"text"},null,8,["modelValue"]),s(a,{modelValue:o.value.igPostLink,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.igPostLink=l),placeholder:"instagram poszt link",type:"text"},null,8,["modelValue"]),i("input",{type:"file",onChange:u},null,32),s(P,{rank:"primary",size:"normal","icon-position":"none",text:"Feltöltés"})],32)]))}});export{h as default};
